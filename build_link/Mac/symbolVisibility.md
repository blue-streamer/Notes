在Mac/linux平台上，动态库（dylib，so）的符号默认情况下是可见的。即当一个动态库载入到内存中时，所有的符号都会被进程中的其他模块看到。当依赖项很多时会有符号冲突的危险，当冲突发生时程序可以会发生段错误，死锁以及一些未定义的行为。还有可能会出现一个模块中错误地调用了另一个模块中的函数。

因此在编译生成一个动态库时添加“-fvisibility=hidden”，这样会隐藏所有的符号，避免冲突的问题。但是，调用动态库的函数也会找不到需要的符号，而产生链接报错。需要API函数先增加声明"\__attribute\__((\__visibility__("default")))"。这样就可以仅仅只暴露需要的API了。

"nm xxx.dylib"可以看到这个库的符号表，"T"表示外部可见的全局符号，"t"表示内部符号

> https://labjack.com/news/simple-cpp-symbol-visibility-demo

